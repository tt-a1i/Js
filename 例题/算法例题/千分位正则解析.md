这段正则表达式 /\B(?=(\d{3})+(?!\d))/g 主要用于在数字的每 3 位前插入逗号（或其他分隔符），它的目的是格式化数字，使其符合千位分隔符的习惯。我们来逐步分析这个正则表达式：

正则表达式的逐步解析：
\B：

这是“非单词边界”（non-word boundary）的意思。它确保分隔符不会出现在数字的开头，也就是说，它会避免在数字最前面插入逗号。例如，123456 应该是 123,456，而不是 ,123,456。
\B 是 \b（单词边界）的反义。123 这样的位置是单词的边界，而 1,234 里面的 , 后面的位置不是单词边界，所以用 \B 来匹配。
(?=...)：

这是正向前瞻（positive lookahead），表示在当前位置后面必须要满足的条件，但不会把它包含在匹配结果中。
这里的条件是 (=\d{3})+，表示要检查在当前位置后面是否有一组三位数字。
\d{3}：

\d 表示一个数字字符（0-9）。
{3} 表示恰好匹配三位数字。
所以 \d{3} 就是匹配连续的三位数字。
+：

这是量词，表示前面的匹配（即 \d{3}）可以重复 1 次或多次，即后面可以有多个三位数组。
(?!\d)：

这是负向后瞻（negative lookahead），表示当前位置的后面不能有数字。
其目的是确保不会在最后的数字后面插入逗号。例如对于 1234，只会插入 1,234，而不会插入 1,234,。
匹配逻辑：
这个正则表达式在以下情况下起作用：

它会找到每组三位数的前面，只要这些数字后面还有其他数字，但不会影响原始数字的内容。
它会避免在最前面或最后一组数字后插入逗号。
例子：
假设数字是 1234567，这个正则表达式的工作流程是：

从右往左，先匹配到 567，但不插入逗号，因为它在最后。
匹配 234 前面的位置，符合条件，所以插入逗号，得到 1,234567。
最后，在 1 后面的 , 被插入，得到 1,234,567。
总结：
\B：确保不在最前面插入逗号。
(?=(\d{3})+(?!\d))：确保每隔 3 位数字插入一个逗号，但最后一组数字后不插入。